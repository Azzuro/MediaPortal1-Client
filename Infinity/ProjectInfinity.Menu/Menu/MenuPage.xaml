<Page x:Class="ProjectInfinity.Menu.View.MenuPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ProjectInfinity.Menu"
    Title="MenuPage" Background="{StaticResource backGroundBrush}" 
    >
  <Page.Resources>
    <ItemsPanelTemplate x:Key="MenuItemsPanelTemplate">
      <StackPanel Orientation="Vertical" Margin ="50,50,50,50"/>
      </ItemsPanelTemplate>

      <ControlTemplate x:Key="MenuTemplate" TargetType="{x:Type Menu}">
      <StackPanel Orientation="Vertical">
        <ItemsPresenter/>
      </StackPanel>
    </ControlTemplate>
    <HierarchicalDataTemplate DataType="{x:Type local:MenuViewModel}" ItemsSource ="{Binding Path=Items}">
      <TextBlock Text="{Binding Path=Text}" />
    </HierarchicalDataTemplate>
    <DataTemplate DataType="{x:Type local:PluginItemViewModel}">
        <Button Command="{Binding Start}" ToolTip ="{Binding Path=Description}" >
          <WrapPanel>
            <TextBlock Text="{Binding Path=Text}" FontSize="20" />
          </WrapPanel>
        </Button>
    </DataTemplate>
  </Page.Resources>
  <StackPanel>
    <Menu  ItemsPanel ="{StaticResource MenuItemsPanelTemplate}" Template="{StaticResource MenuTemplate}" ItemsSource ="{Binding Path=Items}" />
  </StackPanel>
</Page>
