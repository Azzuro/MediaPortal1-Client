<?xml version="1.0" encoding="utf-8"?>
<Canvas
    xmlns="www.team-mediaportal.com/2008/mse/directx"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    DataContext="{Binding Source={Model AssemblyName=mypicture,ClassName=PictureModel},Path=Instance}"
    FocusedElement="{Binding ElementName=mainMenu}"
    History="False" Width="720" Height="576" Background="Black">
  <Canvas x:Name="tst" Loaded="{Command Path=SlideShow.UpdateCurrentPicture}">
    <Image x:Name="picture1" Stretch="UniformToFill" Source="{Binding SlideShow.PreviousPicture}"  Width="720" Height="576" Thumbnail="False" IsEnabled="{Binding SlideShow.PreviousPictureVisible}">

      <Image.Resources>
        <Storyboard x:Key="fadeOutStoryboard" >
          <DoubleAnimation BeginTime="00:00:00" From="1.0" To="0.0" Duration="00:00:01.8000000"  Storyboard.TargetName="picture1" Storyboard.TargetProperty="Opacity"/>
        </Storyboard>
      </Image.Resources>
      <Image.Triggers>
        <Trigger Property="IsEnabled" Value="False">
          <Trigger.EnterActions>
            <BeginStoryboard x:Name="fadeOut" Storyboard="{StaticResource fadeOutStoryboard}" />
          </Trigger.EnterActions>
          <Trigger.ExitActions>
            <StopStoryboard BeginStoryboardName="fadeOut"/>
          </Trigger.ExitActions>
        </Trigger>
      </Image.Triggers>
    </Image>
    <Image x:Name="picture2" Stretch="UniformToFill" Source="{Binding SlideShow.CurrentPicture}" Opacity="0.0"  Width="720" Height="576" Thumbnail="False" IsEnabled="{Binding SlideShow.CurrentPictureVisibile}">
      <Image.Resources>
        <Storyboard x:Key="fadeInStoryboard" >
          <DoubleAnimation BeginTime="00:00:00" From="0.0" To="1.0" Duration="00:00:01.8000000"  Storyboard.TargetName="picture2" Storyboard.TargetProperty="Opacity"/>
        </Storyboard>
      </Image.Resources>
      <Image.Triggers>
        <Trigger Property="IsEnabled" Value="True">
          <Trigger.EnterActions>
            <BeginStoryboard x:Name="fadeIn" Storyboard="{StaticResource fadeInStoryboard}" />
          </Trigger.EnterActions>
          <Trigger.ExitActions>
            <StopStoryboard BeginStoryboardName="fadeIn"/>
          </Trigger.ExitActions>
        </Trigger>
      </Image.Triggers>
    </Image>
    <Canvas x:Name="osd" Width="720" Height="576" IsVisible="{Binding SlideShow.IsPaused}">
      <Border Canvas.Left="20" Canvas.Top="20" Width="680" Height="40" BorderBrush="Black" CornerRadius="8" BorderThickness="1">
        <Border.Background>
          <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
            <GradientStop Offset="0" Color="#90FFFFFF"/>
            <GradientStop Offset="0.5" Color="#F87A7673"/>
            <GradientStop Offset="1" Color="#F87A7673"/>
          </LinearGradientBrush >
        </Border.Background>
      </Border>

      <Image x:Name="pause" Source="video-pause.png" Canvas.Left="604" Canvas.Top="22" Width="92" Height="34"  />
      <Label Font="font13" Canvas.Left="40" Canvas.Top="29" Width="470" Height="30" Text="{Binding SlideShow.CurrentTitle}" Color="White"/>
    </Canvas>
    <KeyBinding KeyPress="ContextMenu" Command="{Command Source={Service WindowManager},Path=ShowDialog}" CommandParameter="dialogMyPictureContextMenu"/>
    <KeyBinding KeyPress="Left" Command="{Command SlideShow.ShowPreviousPicture}"/>
    <KeyBinding KeyPress="Right" Command="{Command SlideShow.ShowNextPicture}"/>
    <KeyBinding KeyPress="Space" Command="{Command SlideShow.Pause}"/>
  </Canvas>
</Canvas>